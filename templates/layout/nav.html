
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Apap

                    </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false" href="#">
                         Account
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                        </svg>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#">Registration</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Log in</a></li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" aria-disabled="true">Disabled</a>
                </li>
            </ul>
            <form class="d-flex nav-item dropdown" role="search">
                <input class="form-control me-2 dropdown-toggle" type="search" placeholder="Search" aria-label="Search" data-bs-toggle="dropdown">
                <button class="btn btn-outline-success " type="submit">Search</button>
                <ul class="dropdown-menu">

                </ul>
            </form>
        </div>
    </div>
</nav>
<main>
</main>
<script>
       /**
     * Klasa SearchComponent - komponent do wyszukiwania i wyświetlania wyników
     * Implementuje wzorzec projektowy komponentu dla możliwości wielokrotnego użycia
     */
    class SearchComponent {
        /**
         * Konstruktor inicjalizujący komponent wyszukiwarki
         * @param {Array<string>} list - Tablica elementów do przeszukiwania
         * @param {string} inputSelector - Selektor CSS dla pola input wyszukiwania
         * @param {string} outputSelector - Selektor CSS dla kontenera wyników
         */
        constructor(list, inputSelector, outputSelector) {
            // Przechowuje oryginalną listę elementów do wyszukiwania
            this.list = list;

            // Znajduje pole input wyszukiwarki w DOM na podstawie podanego selektora
            this.input = document.querySelector(inputSelector);

            // Znajduje kontener dla wyników wyszukiwania w DOM
            this.output = document.querySelector(outputSelector);

            // Zmienna do przechowywania ID timeoutu dla debouncingu
            this.timeoutId = null;

            // Inicjalizacja komponentu - podpięcie event listenerów
            this.init();
        }

        /**
         * Inicjalizuje komponent - podpina event listener do pola input
         * @private
         */
        init() {
            // Dodaje nasłuchiwanie na zdarzenie 'input' (każda zmiana wartości)
            // Używa debounce aby ograniczyć częstotliwość wywołań funkcji wyszukującej
            this.input.addEventListener('input',
                this.debounce(this.handleSearch.bind(this), 300)
            );
            // Dodaje nasłuchiwanie na zdarzenie 'focus' (Gdy użytkownik naciśnie wyszukiwarkę i jest ona aktywna)
            this.input.addEventListener('focus',
                this.debounce(this.handleSearch.bind(this), 0)
            );
        }

        /**
         * Funkcja debounce - ogranicza częstotliwość wywoływania funkcji
         * Zapobiega nadmiernemu obciążeniu podczas szybkiego wpisywania
         * @param {Function} func - Funkcja do wykonania
         * @param {number} delay - Opóźnienie w milisekundach
         * @returns {Function} Funkcja opakowująca z debouncingiem
         */
        debounce(func, delay) {
            return (...args) => {
                // Czyści poprzedni timeout jeśli istnieje
                clearTimeout(this.timeoutId);

                // Ustawia nowy timeout dla funkcji
                this.timeoutId = setTimeout(() => {
                    // Wywołuje funkcję z zachowaniem kontekstu 'this' i argumentami
                    func.apply(this, args);
                }, delay);
            };
        }

        /**
         * Obsługuje zdarzenie wyszukiwania - główna logika wyszukiwarki
         * @private
         */
        handleSearch() {
            // Pobiera i czyści wartość z pola input (usuwa białe znaki)
            const searchTerm = this.input.value.trim();

            // Pobiera przefiltrowane wyniki na podstawie wyszukiwanej frazy
            const results = this.getResults(searchTerm);

            // Renderuje wyniki w kontenerze
            this.render(results);
        }

        /**
         * Filtruje listę i zwraca pasujące elementy
         * @param {string} searchTerm - Fraza do wyszukania
         * @returns {Array<string>} Tablica wyników z podświetlonymi dopasowaniami
         * @private
         */
        getResults(searchTerm) {
            // Jeśli brak frazy wyszukiwania - zwraca pustą tablicę
            if (!searchTerm) return this.list;

            // Filtruje listę: tylko elementy zawierające szukaną frazę (case insensitive)
            return this.list
                .filter(item => item.toLowerCase().includes(searchTerm.toLowerCase()))

                // Dla każdego pasującego elementu dodaje znaczniki <mark> do podświetlenia
                .map(item => this.highlight(item, searchTerm));
        }

        /**
         * Podświetla dopasowaną frazę w tekście używając znacznika <mark>
         * @param {string} text - Tekst do przetworzenia
         * @param {string} term - Fraza do podświetlenia
         * @returns {string} Tekst z podświetloną frazą
         * @private
         */
        highlight(text, term) {
            // Escape'uje znaki specjalne regex w szukanej frazie
            // np. '.' staje się '\.', '*' staje się '\*'
            const escaped = term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');

            // Tworzy regex do globalnego (g) i case-insensitive (i) wyszukiwania
            const regex = new RegExp(`(${escaped})`, 'gi');

            // Zamienia wszystkie wystąpienia frazy na <mark>fraza</mark>
            // $1 w replace odnosi się do pierwszej grupy przechwytującej z regex
            return text.replace(regex, '<mark>$1</mark>');
        }

        /**
         * Renderuje wyniki wyszukiwania w kontenerze
         * @param {Array<string>} results - Tablica sformatowanych wyników (z HTML)
         * @private
         */
        render(results) {
            // Ustawia zawartość HTML kontenera wyników
            // Każdy wynik jest opakowany w tag <p>
            // join('') łączy tablicę w string bez separatorów
            this.output.innerHTML = results
                .map(result => `<li>
                                    <a class="dropdown-item">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                        </svg>
                                    ${result}
                                    </a>
                                </li>
                                <li><hr class="dropdown-divider"></li>
                `)
                .join('');
            this.output.innerHTML += `<li class="text-center"><sub >Wyniki wyszukiwania</sub></li>`;
        }
    }

    // Przykład użycia komponentu - można tworzyć wiele instancji na stronie
    // Każda z własną listą, polem wyszukiwania i kontenerem wyników
    const search = new SearchComponent(
        ["adam", "beata", "cogah"],               // Lista do przeszukania
        "form[role='search']>input[type='search']", // Selektor pola wyszukiwania
        "form[role='search']>.dropdown-menu"                                    // Selektor kontenera wyników
    );

    // Możliwość utworzenia kolejnej instancji dla innej sekcji strony:
    // const search2 = new SearchComponent(
    //     ["product1", "product2", "product3"],
    //     "#other-search-input",
    //     "#other-results"
    // );
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>




